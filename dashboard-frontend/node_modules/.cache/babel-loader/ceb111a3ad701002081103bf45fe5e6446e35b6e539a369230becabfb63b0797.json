{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport api from \"../../api/api\";\nexport const get_seller_payment_details = createAsyncThunk('payment/get_seller_payment_details', async (sellerId, {\n  rejectWithValue,\n  fulfillWithValue\n}) => {\n  try {\n    const {\n      data\n    } = await api.get(`/payment/seller-payment-details/${sellerId} `, {\n      withCredentials: true\n    });\n    return fulfillWithValue(data);\n  } catch (error) {\n    // console.log(error.response.data)\n    return rejectWithValue(error.response.data);\n  }\n});\n// End Method \n\nexport const send_withdrawal_request = createAsyncThunk('payment/send_withdrawal_request', async (info, {\n  rejectWithValue,\n  fulfillWithValue\n}) => {\n  try {\n    const {\n      data\n    } = await api.post(`/payment/withdrawal-request`, info, {\n      withCredentials: true\n    });\n    return fulfillWithValue(data);\n  } catch (error) {\n    // console.log(error.response.data)\n    return rejectWithValue(error.response.data);\n  }\n});\n// End Method \n\nexport const get_payment_request = createAsyncThunk('payment/get_payment_request', async (_, {\n  rejectWithValue,\n  fulfillWithValue\n}) => {\n  try {\n    const {\n      data\n    } = await api.get(`/payment/request`, {\n      withCredentials: true\n    });\n    return fulfillWithValue(data);\n  } catch (error) {\n    // console.log(error.response.data)\n    return rejectWithValue(error.response.data);\n  }\n});\n// End Method \n\nexport const confirm_payment_request = createAsyncThunk('payment/confirm_payment_request', async (paymentId, {\n  rejectWithValue,\n  fulfillWithValue\n}) => {\n  try {\n    const {\n      data\n    } = await api.post(`/payment/request-confirm`, {\n      paymentId\n    }, {\n      withCredentials: true\n    });\n    return fulfillWithValue(data);\n  } catch (error) {\n    // console.log(error.response.data)\n    return rejectWithValue(error.response.data);\n  }\n});\n// End Method \n\nexport const PaymentReducer = createSlice({\n  name: 'payment',\n  initialState: {\n    successMessage: '',\n    errorMessage: '',\n    loader: false,\n    pendingWithdraws: [],\n    successWithdraws: [],\n    totalAmount: 0,\n    withdrawAmount: 0,\n    pendingAmount: 0,\n    availableAmount: 0\n  },\n  reducers: {\n    messageClear: (state, _) => {\n      state.successMessage = \"\";\n      state.errorMessage = \"\";\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(get_seller_payment_details.fulfilled, (state, {\n      payload\n    }) => {\n      state.pendingWithdraws = payload.pendingWithdraws;\n      state.successWithdraws = payload.successWithdraws;\n      state.totalAmount = payload.totalAmount;\n      state.availableAmount = payload.availableAmount;\n      state.withdrawAmount = payload.withdrawAmount;\n      state.pendingAmount = payload.pendingAmount;\n    }).addCase(send_withdrawal_request.pending, (state, {\n      payload\n    }) => {\n      state.loader = true;\n    }).addCase(send_withdrawal_request.rejected, (state, {\n      payload\n    }) => {\n      state.loader = false;\n      state.errorMessage = payload.message;\n    }).addCase(send_withdrawal_request.fulfilled, (state, {\n      payload\n    }) => {\n      state.loader = false;\n      state.successMessage = payload.message;\n      state.pendingWithdraws = [...state.pendingWithdraws, payload.withdrawal];\n      state.availableAmount = state.availableAmount - payload.withdrawal.amount;\n      state.pendingAmount = payload.withdrawal.amount;\n    }).addCase(get_payment_request.fulfilled, (state, {\n      payload\n    }) => {\n      state.pendingWithdraws = payload.withdrawalRequest;\n    }).addCase(confirm_payment_request.pending, (state, {\n      payload\n    }) => {\n      state.loader = true;\n    }).addCase(confirm_payment_request.rejected, (state, {\n      payload\n    }) => {\n      state.loader = false;\n      if (payload.message && payload.accountLink) {\n        state.errorMessage = JSON.stringify({\n          message: payload.message,\n          accountLink: payload.accountLink,\n          requirements: payload.requirements\n        });\n      } else {\n        state.errorMessage = payload.message;\n      }\n    }).addCase(confirm_payment_request.fulfilled, (state, {\n      payload\n    }) => {\n      const temp = state.pendingWithdraws.filter(r => r._id !== payload.payment._id);\n      state.loader = false;\n      state.successMessage = payload.message;\n      state.pendingWithdraws = temp;\n    });\n  }\n});\nexport const {\n  messageClear\n} = PaymentReducer.actions;\nexport default PaymentReducer.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","api","get_seller_payment_details","sellerId","rejectWithValue","fulfillWithValue","data","get","withCredentials","error","response","send_withdrawal_request","info","post","get_payment_request","_","confirm_payment_request","paymentId","PaymentReducer","name","initialState","successMessage","errorMessage","loader","pendingWithdraws","successWithdraws","totalAmount","withdrawAmount","pendingAmount","availableAmount","reducers","messageClear","state","extraReducers","builder","addCase","fulfilled","payload","pending","rejected","message","withdrawal","amount","withdrawalRequest","accountLink","JSON","stringify","requirements","temp","filter","r","_id","payment","actions","reducer"],"sources":["C:/Users/Admin/GR1_E-Commerce_Project/dashboard-frontend/src/store/Reducers/paymentReducer.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\nimport api from \"../../api/api\";\r\n\r\nexport const get_seller_payment_details = createAsyncThunk(\r\n    'payment/get_seller_payment_details',\r\n    async (sellerId, { rejectWithValue, fulfillWithValue }) => {\r\n        try {\r\n            const { data } = await api.get(`/payment/seller-payment-details/${sellerId} `, { withCredentials: true })\r\n            return fulfillWithValue(data)\r\n        } catch (error) {\r\n            // console.log(error.response.data)\r\n            return rejectWithValue(error.response.data)\r\n        }\r\n    }\r\n)\r\n// End Method \r\n\r\n\r\nexport const send_withdrawal_request = createAsyncThunk(\r\n    'payment/send_withdrawal_request',\r\n    async (info, { rejectWithValue, fulfillWithValue }) => {\r\n        try {\r\n            const { data } = await api.post(`/payment/withdrawal-request`, info, { withCredentials: true })\r\n            return fulfillWithValue(data)\r\n        } catch (error) {\r\n            // console.log(error.response.data)\r\n            return rejectWithValue(error.response.data)\r\n        }\r\n    }\r\n)\r\n// End Method \r\n\r\nexport const get_payment_request = createAsyncThunk(\r\n    'payment/get_payment_request',\r\n    async (_, { rejectWithValue, fulfillWithValue }) => {\r\n        try {\r\n            const { data } = await api.get(`/payment/request`, { withCredentials: true })\r\n            return fulfillWithValue(data)\r\n        } catch (error) {\r\n            // console.log(error.response.data)\r\n            return rejectWithValue(error.response.data)\r\n        }\r\n    }\r\n)\r\n// End Method \r\n\r\nexport const confirm_payment_request = createAsyncThunk(\r\n    'payment/confirm_payment_request',\r\n    async (paymentId, { rejectWithValue, fulfillWithValue }) => {\r\n        try {\r\n            const { data } = await api.post(`/payment/request-confirm`, { paymentId }, { withCredentials: true })\r\n            return fulfillWithValue(data)\r\n        } catch (error) {\r\n            // console.log(error.response.data)\r\n            return rejectWithValue(error.response.data)\r\n        }\r\n    }\r\n)\r\n// End Method \r\n\r\n\r\n\r\n\r\nexport const PaymentReducer = createSlice({\r\n    name: 'payment',\r\n    initialState: {\r\n        successMessage: '',\r\n        errorMessage: '',\r\n        loader: false,\r\n        pendingWithdraws: [],\r\n        successWithdraws: [],\r\n        totalAmount: 0,\r\n        withdrawAmount: 0,\r\n        pendingAmount: 0,\r\n        availableAmount: 0,\r\n    },\r\n    reducers: {\r\n\r\n        messageClear: (state, _) => {\r\n            state.successMessage = \"\"\r\n            state.errorMessage = \"\"\r\n        }\r\n\r\n    },\r\n    extraReducers: (builder) => {\r\n        builder\r\n\r\n            .addCase(get_seller_payment_details.fulfilled, (state, { payload }) => {\r\n                state.pendingWithdraws = payload.pendingWithdraws;\r\n                state.successWithdraws = payload.successWithdraws;\r\n                state.totalAmount = payload.totalAmount;\r\n                state.availableAmount = payload.availableAmount;\r\n                state.withdrawAmount = payload.withdrawAmount;\r\n                state.pendingAmount = payload.pendingAmount;\r\n            })\r\n\r\n            .addCase(send_withdrawal_request.pending, (state, { payload }) => {\r\n                state.loader = true\r\n            })\r\n            .addCase(send_withdrawal_request.rejected, (state, { payload }) => {\r\n                state.loader = false\r\n                state.errorMessage = payload.message;\r\n            })\r\n            .addCase(send_withdrawal_request.fulfilled, (state, { payload }) => {\r\n                state.loader = false\r\n                state.successMessage = payload.message;\r\n                state.pendingWithdraws = [...state.pendingWithdraws, payload.withdrawal];\r\n                state.availableAmount = state.availableAmount - payload.withdrawal.amount;\r\n                state.pendingAmount = payload.withdrawal.amount;\r\n            })\r\n\r\n            .addCase(get_payment_request.fulfilled, (state, { payload }) => {\r\n                state.pendingWithdraws = payload.withdrawalRequest\r\n            })\r\n\r\n            .addCase(confirm_payment_request.pending, (state, { payload }) => {\r\n                state.loader = true\r\n            })\r\n            .addCase(confirm_payment_request.rejected, (state, { payload }) => {\r\n                state.loader = false\r\n                if (payload.message && payload.accountLink) {\r\n                    state.errorMessage = JSON.stringify({\r\n                        message: payload.message,\r\n                        accountLink: payload.accountLink,\r\n                        requirements: payload.requirements\r\n                    });\r\n                } else {\r\n                    state.errorMessage = payload.message;\r\n                }\r\n            })\r\n            .addCase(confirm_payment_request.fulfilled, (state, { payload }) => {\r\n                const temp = state.pendingWithdraws.filter(r => r._id !== payload.payment._id)\r\n                state.loader = false\r\n                state.successMessage = payload.message;\r\n                state.pendingWithdraws = temp\r\n            })\r\n\r\n\r\n    }\r\n\r\n})\r\nexport const { messageClear } = PaymentReducer.actions\r\nexport default PaymentReducer.reducer"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}